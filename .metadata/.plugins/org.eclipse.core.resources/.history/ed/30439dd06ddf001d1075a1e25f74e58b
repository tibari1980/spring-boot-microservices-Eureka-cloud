package com.arcesi.ProductService.jdd;

import java.time.Instant;
import java.util.UUID;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.CommandLineRunner;
import org.springframework.stereotype.Component;

import com.arcesi.ProductService.entities.CategoryEntity;
import com.arcesi.ProductService.entities.ProductEntity;
import com.arcesi.ProductService.repositories.CategoryRepository;
import com.arcesi.ProductService.repositories.ProductRepository;

@Component
public class JeuTest implements CommandLineRunner {

	@Autowired
	private CategoryRepository categoryRepository;
	@Autowired
	private ProductRepository productRepository;
	@Override
	public void run(String... args) throws Exception {
		CategoryEntity telephone=CategoryEntity.builder()
				.createdAt(Instant.now())
				.uidCategory(UUID.randomUUID().toString())
				.libelle("TELEPHONE")
				.description("Description telephone")
				.build();
		
		CategoryEntity ordinateur=CategoryEntity.builder()
				.createdAt(Instant.now())
				.uidCategory(UUID.randomUUID().toString())
				.libelle("ORDINATEUR PC")
				.description("Description ORDINATEUR")
				.build();
		CategoryEntity livre=CategoryEntity.builder()
				.createdAt(Instant.now())
				.uidCategory(UUID.randomUUID().toString())
				.libelle("LIVRE")
				.description("Description LIVRE")
				.build();
		CategoryEntity catTel=categoryRepository.save(telephone);
		CategoryEntity catOrdi=categoryRepository.save(ordinateur);
		CategoryEntity cateLivre=categoryRepository.save(livre);
		
		for(int i=0;i<20;i++) {
			ProductEntity tele=ProductEntity.builder()
					.uidProduct(UUID.randomUUID().toString())
					.designation("IPHONE PRO"+i)
					.description("description iphone pro "+i)
					.prix(20* (i+1))
					.createdAt(Instant.now())
					.isDisponible(Boolean.TRUE)
					.isEnPromotion(Boolean.TRUE)
					.quantiteStock(i+1 *20)
					.categoryEntity(catTel)
					.build();
			
		}
	}


	
}
